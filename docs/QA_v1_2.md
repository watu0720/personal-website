# QA v1.2（コメントログ / 全体検索 / 通報UI）

## コメントログ

- [ ] 各ページで最新 20 件のみ表示されること
- [ ] コメントが 21 件以上あるときだけ「コメントログへ」リンクが表示されること
- [ ] `/comments/<page_key>` に直接アクセスすると、そのページの全コメントが表示されること
- [ ] コメントログでは 100 件 / ページでページネーションできること（前へ / 次へ）

## 全体検索

- [ ] ヘッダーの検索欄から 1 文字以上入力して `/search` に遷移できること
- [ ] `/search` 画面のフォームで検索語とモード（部分一致 / 単語完全一致）を切り替えて再検索できること
- [ ] 検索結果が「ページ / コメント / 動画 / GitHub」に分かれて表示されること
- [ ] 各結果にタイトルとスニペット、遷移先リンクが表示されること
- [ ] 検索結果からページやコメントログに遷移したとき、本文・コメントがハイライトされること

## 通報 UI

- [ ] ログインユーザー / ゲストのどちらもコメントを通報できること
- [ ] 同じユーザー / 端末から同じコメントを 2 回通報しようとすると「既に通報済み」としてエラーになること
- [ ] 通報したユーザーだけ、そのコメントが「通報済みコメント」として折りたたまれて表示されること
- [ ] 折りたたまれた通報済みコメントは、クリックすると本文が展開されること
- [ ] 通報済みコメントでは通報ボタンが「通報済み」となり、再度押せないこと
- [ ] 他のユーザーからは、通報されていても通常のコメントとして表示されること
- [ ] 同じコメントに対する通報が 3 件以上になると、自動的に `is_hidden=true / hidden_reason='reported'` になり、通常画面からは非表示になること

